(this["webpackJsonpmy-file-upload-app"]=this["webpackJsonpmy-file-upload-app"]||[]).push([[0],{20:function(e,t,n){e.exports=n(30)},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(19),c=n.n(r),o=(n(29),n(15)),u=n(2),i=n(3),m="http://api-loadbalancer-878512270.us-east-2.elb.amazonaws.com";var s=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),u=Object(i.a)(c,2),s=u[0],d=u[1];return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Login"),l.a.createElement("input",{type:"email",placeholder:"Email",value:n,onChange:function(e){return r(e.target.value)}}),l.a.createElement("input",{type:"password",placeholder:"Password",value:s,onChange:function(e){return d(e.target.value)}}),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){fetch(m+"/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:s})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed to login")})).then((function(e){var t=e.accessToken,n=e.role;localStorage.setItem("token",t),window.location.href="admin"==n?"admin":"fms"})).catch((function(e){console.error("Error:",e),alert("Login failed. Please check your credentials.")}))}},"Login"),l.a.createElement("p",null,"Don't have an account? ",l.a.createElement(o.b,{to:"/register"},"Register")))};var d=function(e){var t=e.onLogout;return l.a.createElement("nav",{className:"navbar"},l.a.createElement("button",{className:"logout-button",onClick:t},"Logout"))};var f=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),o=Object(i.a)(c,2),u=o[0],s=o[1],d=Object(a.useState)(""),f=Object(i.a)(d,2),E=f[0],h=f[1];return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Register"),l.a.createElement("input",{type:"text",placeholder:"Name",value:E,onChange:function(e){return h(e.target.value)}}),l.a.createElement("input",{type:"email",placeholder:"Email",value:n,onChange:function(e){return r(e.target.value)}}),l.a.createElement("input",{type:"password",placeholder:"Password",value:u,onChange:function(e){return s(e.target.value)}}),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){fetch(m+"/api/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:E,email:n,password:u})}).then((function(e){return e.json()})).then((function(e){alert("Registration successful")})).catch((function(e){console.error("Error:",e),alert("Registration failed. Please check your information.")}))}},"Register"),l.a.createElement("p",null,"Already have an account? ",l.a.createElement("a",{href:"/login"},"Login")))};var E=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),o=Object(i.a)(c,2),u=o[0],s=o[1],f=Object(a.useState)(null),E=Object(i.a)(f,2),h=E[0],p=E[1],b=Object(a.useState)(localStorage.getItem("token")),g=Object(i.a)(b,1)[0];Object(a.useEffect)((function(){g?j():window.location.href="login"}),[g]);var v=function(e){r(e.target.files[0])},j=function(){fetch(m+"/api/files",{method:"GET",headers:{"access-token":"Bearer "+g}}).then((function(e){return e.json()})).then((function(e){s(e)})).catch((function(e){console.error("Error:",e)}))},y=function(e){p(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(d,{onLogout:function(){return localStorage.clear(),void(window.location.href="login")}}),l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"File Upload"),l.a.createElement("input",{type:"file",onChange:v}),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){if(n){var e=new FormData;e.append("file",n),fetch(m+"/api/upload",{method:"POST",headers:{"access-token":"Bearer "+g},body:e}).then((function(e){return e.text()})).then((function(e){alert(e),j()})).catch((function(e){alert("Please select a file to upload."),console.error("Error:",e)}))}else alert("Please select a file to upload.")}},"Upload"),l.a.createElement("h2",null,"File List"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"File Name"),l.a.createElement("th",null,"Actions"),l.a.createElement("th",null,"Created At"),l.a.createElement("th",null,"Modified At"))),l.a.createElement("tbody",null,u.map((function(e){return l.a.createElement("tr",{key:e.fileName},l.a.createElement("td",null,l.a.createElement("a",{href:"https://d2sm8dpuxev7td.cloudfront.net/"+e.fileUrl},e.fileName)),l.a.createElement("td",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"1%"}},l.a.createElement("button",{onClick:function(){return y(e.fileName)}},"Update"),l.a.createElement("button",{id:"delete",onClick:function(){return t=e.fileName,void fetch(m+"/api/delete/"+t,{method:"DELETE",headers:{"access-token":"Bearer "+g}}).then((function(e){return e.text()})).then((function(e){alert(e),j()})).catch((function(e){console.error("Error:",e)}));var t}},"Delete"))),l.a.createElement("td",null,e.createdAt.substring(0,19)),l.a.createElement("td",null,e.modifiedAt.substring(0,19)))})))),h&&l.a.createElement("div",null,l.a.createElement("h2",null,"Update File"),l.a.createElement("input",{type:"file",onChange:v}),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},l.a.createElement("button",{onClick:function(){return function(e){if(n){var t=new FormData;t.append("file",n),fetch(m+"/api/update/"+e,{method:"PUT",headers:{"access-token":"Bearer "+g},body:t}).then((function(e){return e.text()})).then((function(e){alert(e),j()})).catch((function(e){alert("Please select a file to update."),console.error("Error:",e)}))}else alert("Please select a file to update.")}(h)}},"Upload"),l.a.createElement("button",{onClick:function(){return y(null)}},"Cancel")))))};var h=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(localStorage.getItem("token")),o=Object(i.a)(c,1)[0];Object(a.useEffect)((function(){o?u():window.location.href="login"}),[o]);var u=function(){fetch(m+"/api/user/admin",{method:"GET",headers:{"access-token":"Bearer "+o}}).then((function(e){return e.json()})).then((function(e){r(e)})).catch((function(e){console.error("Error:",e)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(d,{onLogout:function(){return localStorage.clear(),void(window.location.href="login")}}),l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"Admin Page - User List"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"User ID"),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Email"))),l.a.createElement("tbody",null,n.map((function(e){return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,e.userId),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return t=e.userId,localStorage.setItem("userId",t),void(window.location.href="filelist");var t}},e.name)),l.a.createElement("td",null,e.email))}))))))};var p=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),o=Object(i.a)(c,2),u=o[0],s=o[1],f=Object(a.useState)(localStorage.getItem("token")),E=Object(i.a)(f,1)[0],h=Object(a.useState)(null),p=Object(i.a)(h,2),b=p[0],g=p[1];Object(a.useEffect)((function(){E?v():window.location.href="login"}),[E]);var v=function(){var e=localStorage.getItem("userId");fetch(m+"/api/filesById/"+e,{method:"GET",headers:{"access-token":"Bearer "+E}}).then((function(e){return e.json()})).then((function(e){s(e)})).catch((function(e){console.error("Error:",e)}))},j=function(e){g(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(d,{onLogout:function(){return localStorage.clear(),void(window.location.href="login")}}),l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"File List"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"File Name"),l.a.createElement("th",null,"Actions"),l.a.createElement("th",null,"Created At"),l.a.createElement("th",null,"Modified At"))),l.a.createElement("tbody",null,u.map((function(e){return l.a.createElement("tr",{key:e.fileName},l.a.createElement("td",null,l.a.createElement("a",{href:"https://d2sm8dpuxev7td.cloudfront.net/"+e.fileUrl},e.fileName)),l.a.createElement("td",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("button",{onClick:function(){return j(e.id)}},"Update"),l.a.createElement("button",{id:"delete",onClick:function(){return t=e.id,void fetch(m+"/api/deleteAsAdmin/"+t,{method:"DELETE",headers:{"access-token":"Bearer "+E}}).then((function(e){return e.text()})).then((function(e){alert(e),v()})).catch((function(e){console.error("Error:",e)}));var t}},"Delete"))),l.a.createElement("td",null,e.createdAt.substring(0,19)),l.a.createElement("td",null,e.modifiedAt.substring(0,19)))})))),b&&l.a.createElement("div",null,l.a.createElement("h2",null,"Update File"),l.a.createElement("input",{type:"file",onChange:function(e){r(e.target.files[0])}}),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},l.a.createElement("button",{onClick:function(){return function(e){if(n){var t=new FormData;t.append("file",n),fetch(m+"/api/updateAsAdmin/"+e,{method:"PUT",headers:{"access-token":"Bearer "+E},body:t}).then((function(e){return e.text()})).then((function(e){alert(e),v()})).catch((function(e){alert("Please select a file to update."),console.error("Error:",e)}))}else alert("Please select a file to update.")}(b)}},"Upload"),l.a.createElement("button",{onClick:function(){return j(null)}},"Cancel")))))};var b=function(){return l.a.createElement(o.a,null,l.a.createElement("div",null,l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/",element:l.a.createElement(s,null)}),l.a.createElement(u.a,{path:"/login",element:l.a.createElement(s,null)}),l.a.createElement(u.a,{path:"/register",element:l.a.createElement(f,null)}),l.a.createElement(u.a,{path:"/fms",element:l.a.createElement(E,null)}),l.a.createElement(u.a,{path:"/admin",element:l.a.createElement(h,null)}),l.a.createElement(u.a,{path:"/filelist",element:l.a.createElement(p,null)}))))},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,a=t.getFID,l=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),l(e),r(e),c(e)}))};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(b,null))),g()}},[[20,1,2]]]);
//# sourceMappingURL=main.f1b6abce.chunk.js.map