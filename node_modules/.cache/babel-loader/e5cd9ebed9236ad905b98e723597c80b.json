{"ast":null,"code":"import _slicedToArray from\"F:\\\\281\\\\my-file-upload-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Navbar from'./Navbar';import{BASE_URL as url}from'../Config';function Admin(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userList=_useState2[0],setUserList=_useState2[1];var _useState3=useState(localStorage.getItem('token')),_useState4=_slicedToArray(_useState3,1),accessToken=_useState4[0];useEffect(function(){if(accessToken){loadUserList();}else{// Redirect to the login page or display an error message\nwindow.location.href='login';}},[accessToken]);var loadUserList=function loadUserList(){// Fetch the list of users from your API\n// Replace the fetch call with your actual API endpoint\nfetch(url+'/api/user/admin',{method:'GET',headers:{'access-token':'Bearer '+accessToken}}).then(function(response){return response.json();}).then(function(data){setUserList(data);}).catch(function(error){console.error('Error:',error);});};var toFileList=function toFileList(fileName){localStorage.setItem('userId',fileName);window.location.href='filelist';};var logout=function logout(){localStorage.clear();window.location.href='login';};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Navbar,{onLogout:function onLogout(){return logout();}}),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Admin Page - User List\"),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"User ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"))),/*#__PURE__*/React.createElement(\"tbody\",null,userList.map(function(user){return/*#__PURE__*/React.createElement(\"tr\",{key:user.id},/*#__PURE__*/React.createElement(\"td\",null,user.userId),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return toFileList(user.userId);}},user.name)),/*#__PURE__*/React.createElement(\"td\",null,user.email));})))));}export default Admin;","map":{"version":3,"names":["React","useState","useEffect","Navbar","BASE_URL","url","Admin","_useState","_useState2","_slicedToArray","userList","setUserList","_useState3","localStorage","getItem","_useState4","accessToken","loadUserList","window","location","href","fetch","method","headers","then","response","json","data","catch","error","console","toFileList","fileName","setItem","logout","clear","createElement","Fragment","onLogout","className","map","user","key","id","userId","onClick","name","email"],"sources":["F:/281/my-file-upload-app/src/Components/Admin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Navbar from './Navbar';\r\nimport { BASE_URL  as  url} from '../Config';\r\n\r\nfunction Admin() {\r\n    const [userList, setUserList] = useState([]);\r\n    const [accessToken] = useState(localStorage.getItem('token'));\r\n  \r\n    useEffect(() => {\r\n      if (accessToken) {\r\n        loadUserList();\r\n      } else {\r\n        // Redirect to the login page or display an error message\r\n        window.location.href = 'login';\r\n      }\r\n    }, [accessToken]);\r\n  \r\n    const loadUserList = () => {\r\n      // Fetch the list of users from your API\r\n      // Replace the fetch call with your actual API endpoint\r\n      fetch(url+'/api/user/admin', {\r\n        method: 'GET',\r\n        headers: {\r\n          'access-token': 'Bearer ' + accessToken,\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          setUserList(data);\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error:', error);\r\n        });\r\n    };\r\n\r\n    const toFileList= (fileName) =>\r\n    {\r\n        localStorage.setItem('userId',fileName)\r\n        window.location.href = 'filelist';\r\n\r\n    }\r\n  \r\n    const logout = () => {\r\n      localStorage.clear();\r\n      window.location.href = 'login';\r\n    };\r\n  \r\n    return (\r\n      <>\r\n        <Navbar onLogout={() => logout()}></Navbar>\r\n        <div className=\"container\">\r\n          <h2>Admin Page - User List</h2>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>User ID</th>\r\n                <th>Name</th>\r\n                <th>Email</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {userList.map((user) => (\r\n                <tr key={user.id}>\r\n                  <td>{user.userId}</td>\r\n                  <td><button onClick={()=>toFileList(user.userId)}>{user.name}</button></td>\r\n                  <td>{user.email}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n  \r\n  export default Admin;"],"mappings":"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"},"metadata":{},"sourceType":"module"}