{"ast":null,"code":"import _slicedToArray from\"F:\\\\281\\\\my-file-upload-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Navbar from'./Navbar';import{BASE_URL as url}from'../Config';function FileList(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),fileList=_useState4[0],setFileList=_useState4[1];var _useState5=useState(localStorage.getItem('token')),_useState6=_slicedToArray(_useState5,1),accessToken=_useState6[0];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),updateFile=_useState8[0],setUpdateFile=_useState8[1];useEffect(function(){if(accessToken){loadFileList();}else{// Redirect to the login page or display an error message\nwindow.location.href='login';}},[accessToken]);var handleFileChange=function handleFileChange(e){setFile(e.target.files[0]);};var loadFileList=function loadFileList(){// Fetch the list of files based on the user's ID from your API\n// Replace the fetch call with your actual API endpoint, passing the user's ID\nvar userId=localStorage.getItem('userId');fetch(url+\"/api/filesById/\"+userId,{method:'GET',headers:{'access-token':'Bearer '+accessToken}}).then(function(response){return response.json();}).then(function(data){setFileList(data);}).catch(function(error){console.error('Error:',error);});};var handleUpdateClick=function handleUpdateClick(fileToBeUpdated){setUpdateFile(fileToBeUpdated);};var handleUploadFile=function handleUploadFile(fileName){if(file){var formData=new FormData();formData.append('file',file);fetch(url+'/api/updateAsAdmin/'+fileName,{method:'PUT',headers:{'access-token':'Bearer '+accessToken},body:formData}).then(function(response){return response.text();}).then(function(data){alert(data);loadFileList();}).catch(function(error){alert('Please select a file to update.');console.error('Error:',error);});}else{alert('Please select a file to update.');}};var deleteFile=function deleteFile(fileName){fetch(url+'/api/deleteAsAdmin/'+fileName,{method:'DELETE',headers:{'access-token':'Bearer '+accessToken}}).then(function(response){return response.text();}).then(function(data){alert(data);loadFileList();}).catch(function(error){console.error('Error:',error);});};var logout=function logout(){localStorage.clear();window.location.href='login';};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Navbar,{onLogout:function onLogout(){return logout();}}),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h2\",null,\"File List\"),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"File Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Actions\"),/*#__PURE__*/React.createElement(\"th\",null,\"Created At\"),/*#__PURE__*/React.createElement(\"th\",null,\"Modified At\"))),/*#__PURE__*/React.createElement(\"tbody\",null,fileList.map(function(fileObject){return/*#__PURE__*/React.createElement(\"tr\",{key:fileObject.fileName},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:'https://d2sm8dpuxev7td.cloudfront.net/'+fileObject.fileUrl},fileObject.fileName)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'space-between'}},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return handleUpdateClick(fileObject.id);}},\"Update\"),/*#__PURE__*/React.createElement(\"button\",{id:\"delete\",onClick:function onClick(){return deleteFile(fileObject.id);}},\"Delete\"))),/*#__PURE__*/React.createElement(\"td\",null,fileObject.createdAt.substring(0,19)),/*#__PURE__*/React.createElement(\"td\",null,fileObject.modifiedAt.substring(0,19)));}))),updateFile&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Update File\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:handleFileChange}),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'space-around'}},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return handleUploadFile(updateFile);}},\"Upload\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return handleUpdateClick(null);}},\"Cancel\")))));}export default FileList;","map":{"version":3,"names":["React","useState","useEffect","Navbar","BASE_URL","url","FileList","_useState","_useState2","_slicedToArray","file","setFile","_useState3","_useState4","fileList","setFileList","_useState5","localStorage","getItem","_useState6","accessToken","_useState7","_useState8","updateFile","setUpdateFile","loadFileList","window","location","href","handleFileChange","e","target","files","userId","fetch","method","headers","then","response","json","data","catch","error","console","handleUpdateClick","fileToBeUpdated","handleUploadFile","fileName","formData","FormData","append","body","text","alert","deleteFile","logout","clear","createElement","Fragment","onLogout","className","map","fileObject","key","fileUrl","style","display","justifyContent","onClick","id","createdAt","substring","modifiedAt","type","onChange"],"sources":["F:/281/my-file-upload-app/src/Components/FileList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Navbar from './Navbar';\r\nimport { BASE_URL  as  url} from '../Config';\r\n\r\nfunction FileList() {\r\n  const [file, setFile] = useState(null);\r\n  const [fileList, setFileList] = useState([]);\r\n  const [accessToken] = useState(localStorage.getItem('token'));\r\n  const [updateFile, setUpdateFile] = useState(null);\r\n  useEffect(() => {\r\n    if (accessToken) {\r\n      loadFileList();\r\n    } else {\r\n      // Redirect to the login page or display an error message\r\n      window.location.href = 'login';\r\n    }\r\n  }, [accessToken]);\r\n\r\n  const handleFileChange = (e) => {\r\n    setFile(e.target.files[0]);\r\n  };\r\n\r\n\r\n  const loadFileList = () => {\r\n    // Fetch the list of files based on the user's ID from your API\r\n    // Replace the fetch call with your actual API endpoint, passing the user's ID\r\n    const userId = localStorage.getItem('userId');\r\n\r\n    fetch(url+\"/api/filesById/\"+userId, {\r\n      method: 'GET',\r\n      headers: {\r\n        'access-token': 'Bearer ' + accessToken,\r\n      },\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      setFileList(data);\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error:', error);\r\n    });\r\n  };\r\n\r\n  const handleUpdateClick = (fileToBeUpdated) => {\r\n    setUpdateFile(fileToBeUpdated);\r\n  };\r\n\r\n  \r\n\r\n  const handleUploadFile  = (fileName) => {\r\n    if (file) {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n    fetch(url+'/api/updateAsAdmin/' + fileName, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'access-token': 'Bearer ' + accessToken,\r\n      },\r\n      body: formData,\r\n    })\r\n    .then((response) => response.text())\r\n    .then((data) => {\r\n      alert(data);\r\n      loadFileList();\r\n    })\r\n    .catch((error) => {\r\n      alert('Please select a file to update.');\r\n      console.error('Error:', error);\r\n    });\r\n} else {\r\n  alert('Please select a file to update.');\r\n}\r\n  };\r\n\r\n  const deleteFile = (fileName) => {\r\n    fetch(url+'/api/deleteAsAdmin/' + fileName, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'access-token': 'Bearer ' + accessToken,\r\n      }\r\n    })\r\n      .then((response) => response.text())\r\n      .then((data) => {\r\n        alert(data);\r\n        loadFileList();\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error:', error);\r\n      });\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.clear();\r\n    window.location.href = 'login';\r\n  };\r\n\r\n  return (\r\n    <>\r\n    <Navbar onLogout={()=> logout()}></Navbar>\r\n    <div className=\"container\">\r\n      <h2>File List</h2>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>File Name</th>\r\n            <th>Actions</th>\r\n            <th>Created At</th>\r\n            <th>Modified At</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {fileList.map((fileObject) => (\r\n            <tr key={fileObject.fileName}>\r\n              <td><a href={'https://d2sm8dpuxev7td.cloudfront.net/'+fileObject.fileUrl}>{fileObject.fileName}</a></td>\r\n              <td >\r\n                <div style={{display:'flex',justifyContent:'space-between'}}>\r\n              <button onClick={() => handleUpdateClick(fileObject.id)}>Update</button>\r\n                <button id=\"delete\" onClick={() => deleteFile(fileObject.id)}>Delete</button>\r\n                </div>\r\n              </td>\r\n              <td >\r\n              {fileObject.createdAt.substring(0,19)}\r\n              </td>\r\n              <td  >\r\n              {fileObject.modifiedAt.substring(0,19)}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      {updateFile && (\r\n          <div>\r\n            <h2>Update File</h2>\r\n            <input type=\"file\" onChange={handleFileChange} />\r\n            <div style={{display:'flex',justifyContent:'space-around'}}>\r\n            <button onClick={()=>handleUploadFile(updateFile)}>Upload</button>\r\n            <button onClick={()=>handleUpdateClick(null)}>Cancel</button>\r\n          </div>\r\n          </div>\r\n        )}\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FileList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}