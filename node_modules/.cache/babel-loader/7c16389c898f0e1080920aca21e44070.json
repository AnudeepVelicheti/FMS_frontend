{"ast":null,"code":"import _slicedToArray from\"F:\\\\281\\\\my-file-upload-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Navbar from'./Navbar';function FileManagement(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),fileList=_useState4[0],setFileList=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),updateFile=_useState6[0],setUpdateFile=_useState6[1];var _useState7=useState(localStorage.getItem(\"token\")),_useState8=_slicedToArray(_useState7,1),accessToken=_useState8[0];useEffect(function(){if(accessToken){loadFileList();}else{// Redirect to the login page or display an error message\nwindow.location.href='login';}},[accessToken]);var handleFileChange=function handleFileChange(e){setFile(e.target.files[0]);};var uploadFile=function uploadFile(){if(file){var formData=new FormData();formData.append('file',file);fetch('http://localhost:8082/api/upload',{method:'POST',headers:{'access-token':'Bearer '+accessToken},body:formData}).then(function(response){return response.text();}).then(function(data){alert(data);loadFileList();}).catch(function(error){alert('Please select a file to upload.');console.error('Error:',error);});}else{alert('Please select a file to upload.');}};var loadFileList=function loadFileList(){fetch('http://localhost:8082/api/files',{method:'GET',headers:{'access-token':'Bearer '+accessToken}}).then(function(response){return response.json();}).then(function(data){setFileList(data);}).catch(function(error){console.error('Error:',error);});};var handleUpdateClick=function handleUpdateClick(fileToBeUpdated){// Set the file to be updated in the state\nsetUpdateFile(fileToBeUpdated);};var handleUploadFile=function handleUploadFile(fileName){if(file){var formData=new FormData();formData.append('file',file);fetch('http://localhost:8082/api/update/'+fileName,{method:'PUT',headers:{'access-token':'Bearer '+accessToken},body:formData}).then(function(response){return response.text();}).then(function(data){alert(data);loadFileList();}).catch(function(error){alert('Please select a file to update.');console.error('Error:',error);});}else{alert('Please select a file to update.');}};var deleteFile=function deleteFile(fileName){fetch('http://localhost:8082/api/delete/'+fileName,{method:'DELETE',headers:{'access-token':'Bearer '+accessToken}}).then(function(response){return response.text();}).then(function(data){alert(data);loadFileList();}).catch(function(error){console.error('Error:',error);});};var logout=function logout(){localStorage.clear();window.location.href='login';};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Navbar,{onLogout:function onLogout(){return logout();}}),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h2\",null,\"File Upload\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:handleFileChange}),/*#__PURE__*/React.createElement(\"button\",{onClick:uploadFile},\"Upload\"),/*#__PURE__*/React.createElement(\"h2\",null,\"File List\"),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"File Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Actions\"))),/*#__PURE__*/React.createElement(\"tbody\",null,fileList.map(function(fileObject){return/*#__PURE__*/React.createElement(\"tr\",{key:fileObject.fileName},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:'https://d2sm8dpuxev7td.cloudfront.net/'+fileObject.fileUrl},fileObject.fileName)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'space-between'}},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return handleUpdateClick(fileObject.fileName);}},\"Update\"),/*#__PURE__*/React.createElement(\"button\",{id:\"delete\",onClick:function onClick(){return deleteFile(fileObject.fileName);}},\"Delete\"))));}))),updateFile&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Update File\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:handleFileChange}),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'space-around'}},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return handleUploadFile(updateFile);}},\"Upload\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return handleUpdateClick(null);}},\"Cancel\")))));}export default FileManagement;","map":{"version":3,"names":["React","useState","useEffect","Navbar","FileManagement","_useState","_useState2","_slicedToArray","file","setFile","_useState3","_useState4","fileList","setFileList","_useState5","_useState6","updateFile","setUpdateFile","_useState7","localStorage","getItem","_useState8","accessToken","loadFileList","window","location","href","handleFileChange","e","target","files","uploadFile","formData","FormData","append","fetch","method","headers","body","then","response","text","data","alert","catch","error","console","json","handleUpdateClick","fileToBeUpdated","handleUploadFile","fileName","deleteFile","logout","clear","createElement","Fragment","onLogout","className","type","onChange","onClick","map","fileObject","key","fileUrl","style","display","justifyContent","id"],"sources":["F:/281/my-file-upload-app/src/Components/FileManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Navbar from './Navbar';\r\n\r\nfunction FileManagement() {\r\n  const [file, setFile] = useState(null);\r\n  const [fileList, setFileList] = useState([]);\r\n  const [updateFile, setUpdateFile] = useState(null);\r\n  const [accessToken] = useState(localStorage.getItem(\"token\"));\r\n\r\n  useEffect(() => {\r\n    if (accessToken) {\r\n      loadFileList();\r\n    } else {\r\n      // Redirect to the login page or display an error message\r\n      window.location.href = 'login';\r\n    }\r\n  }, [accessToken]);\r\n\r\n  const handleFileChange = (e) => {\r\n    setFile(e.target.files[0]);\r\n  };\r\n\r\n  const uploadFile = () => {\r\n    if (file) {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n\r\n      fetch('http://localhost:8082/api/upload', {\r\n        method: 'POST',\r\n        headers: {\r\n          'access-token': 'Bearer ' + accessToken,\r\n        },\r\n        body: formData,\r\n      })\r\n        .then((response) => response.text())\r\n        .then((data) => {\r\n          alert(data);\r\n          loadFileList();\r\n        })\r\n        .catch((error) => {\r\n          alert('Please select a file to upload.');\r\n          console.error('Error:', error);\r\n        });\r\n    } else {\r\n      alert('Please select a file to upload.');\r\n    }\r\n  };\r\n\r\n  const loadFileList = () => {\r\n    fetch('http://localhost:8082/api/files', {\r\n      method: 'GET',\r\n      headers: {\r\n        'access-token': 'Bearer ' + accessToken,\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setFileList(data);\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error:', error);\r\n      });\r\n  };\r\n\r\n  const handleUpdateClick = (fileToBeUpdated) => {\r\n    // Set the file to be updated in the state\r\n    setUpdateFile(fileToBeUpdated);\r\n  };\r\n\r\n  \r\n\r\n  const handleUploadFile  = (fileName) => {\r\n    if (file) {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n    fetch('http://localhost:8082/api/update/' + fileName, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'access-token': 'Bearer ' + accessToken,\r\n      },\r\n      body: formData,\r\n    })\r\n    .then((response) => response.text())\r\n    .then((data) => {\r\n      alert(data);\r\n      loadFileList();\r\n    })\r\n    .catch((error) => {\r\n      alert('Please select a file to update.');\r\n      console.error('Error:', error);\r\n    });\r\n} else {\r\n  alert('Please select a file to update.');\r\n}\r\n  };\r\n\r\n  const deleteFile = (fileName) => {\r\n    fetch('http://localhost:8082/api/delete/' + fileName, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'access-token': 'Bearer ' + accessToken,\r\n      }\r\n    })\r\n      .then((response) => response.text())\r\n      .then((data) => {\r\n        alert(data);\r\n        loadFileList();\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error:', error);\r\n      });\r\n  };\r\n\r\n  const logout = () => {\r\n      localStorage.clear();\r\n      window.location.href = 'login';\r\n      \r\n  };\r\n\r\n  return (\r\n    <>\r\n    <Navbar onLogout={()=> logout()}></Navbar>\r\n    <div className=\"container\">\r\n      <h2>File Upload</h2>\r\n      <input type=\"file\" onChange={handleFileChange} />\r\n      <button onClick={uploadFile}>Upload</button>\r\n      <h2>File List</h2>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>File Name</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {fileList.map((fileObject) => (\r\n            <tr key={fileObject.fileName}>\r\n              <td><a href={'https://d2sm8dpuxev7td.cloudfront.net/'+fileObject.fileUrl}>{fileObject.fileName}</a></td>\r\n              <td >\r\n                <div style={{display:'flex',justifyContent:'space-between'}}>\r\n              <button onClick={() => handleUpdateClick(fileObject.fileName)}>Update</button>\r\n                <button id=\"delete\" onClick={() => deleteFile(fileObject.fileName)}>Delete</button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      {updateFile && (\r\n          <div>\r\n            <h2>Update File</h2>\r\n            <input type=\"file\" onChange={handleFileChange} />\r\n            <div style={{display:'flex',justifyContent:'space-around'}}>\r\n            <button onClick={()=>handleUploadFile(updateFile)}>Upload</button>\r\n            <button onClick={()=>handleUpdateClick(null)}>Cancel</button>\r\n          </div>\r\n          </div>\r\n        )}\r\n    </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FileManagement;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}